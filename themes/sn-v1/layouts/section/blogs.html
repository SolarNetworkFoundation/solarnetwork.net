{{ define "title"}}{{ .Site.Title }}{{ end }}
{{ define "header"}}{{ partial "header" .}}{{ end }}
{{ define "main" }}
{{ $page := . }}
<section class="sn-alt sn-light">
  <div class="sn-container sn-deck sn-learn sn-pair">
    <div class="sn-info-card">
      <h1>News &amp; insights</h1>
      <div class="sn-grid">
        {{ range .Data.Pages }}
          {{ .Scratch.Set "p"  (dict
            "Page" .
            "title" (cond (isset .Params "heading") .Params.heading .Title)
            "url" .RelPermalink
            "content" (.Summary |plainify)
            "link" "Read more"
            "caption" (cond (isset . "PublishDate")
              (.PublishDate.Format "2 January 2006")
              (.Date.Format "2 January 2006"))
            )}}
          {{ if and (isset .Params "images") (isset .Params.images "logo") }}
            {{ .Scratch.SetInMap "p" "img" .Params.images.logo }}
          {{ end }}
          {{ if or .Truncated (isset .Params "is-subsection") }}
            {{ .Scratch.SetInMap "p" "link" "Read more" }}
          {{ end }}
          {{ if isset .Params "audience" }}
            {{ .Scratch.SetInMap "p" "class" (printf "sn-%s" .Params.audience) }}
          {{ end }}
          {{ partial "deck-link-card" (.Scratch.Get "p") }}
        {{ end }}
      </div>
    </div>
  </div>
</section>
{{ end }}
{{ define "tail" }}{{ partialCached "tail" . }}{{ end }}
{{ define "footer" }}{{ partialCached "footer" . }}{{ end }}
